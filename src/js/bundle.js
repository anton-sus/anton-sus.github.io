const apiKey="36783e67c693e40318a73ec3be962cfb",limit=3;function fetchCityData(t){t=`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=${limit}&appid=`+apiKey;return fetch(t).then(t=>t.json()).then(t=>{if(0<t.length)return console.log(t),{lat:t[0].lat,lon:t[0].lon,foundCityName:t[0].name,state:t[0].state,country:t[0].country};throw new Error("Не найдено местоположение для указанного города")}).catch(t=>console.error("Ошибка:",t))}function fetchWeatherData(t,e){t=`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=`+apiKey;fetch(t).then(t=>t.json()).then(t=>t)}document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("searchInput");var t=document.getElementById("searchButton");let a=document.getElementById("cityTitle"),o=document.getElementById("cityInfo");n.style.display="none",t.addEventListener("click",function(){"none"===n.style.display?(n.style.display="block",n.value=null,n.focus()):n.style.display="none"}),document.addEventListener("click",function(t){n.contains(t.target)||"searchButton"===t.target.id||(n.style.display="none")}),n.addEventListener("keydown",function(t){if("Enter"===t.key){let e=n.value;console.log(e),fetchCityData(e).then(t=>{console.log(t.lat,t.lon);var e=`${t.state} (${t.country}) - ${t.lat}°N, ${t.lat}30°E`;return a.innerHTML=t.foundCityName,o.innerHTML=e,fetchWeatherData(t.lat,t.lon)}).then(t=>{console.log(t),localStorage.setItem("searches",JSON.stringify(e))}).catch(t=>console.error("Ошибка fetchCityData:",t))}})});